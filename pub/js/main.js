"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}var localEducationURL="http://localhost/resume_site/pub/api/education",education=[],deletedEducationId=null,updatedEducationId=null;function changeEducationEndState(){this.checked?(document.getElementById("educationendyear").setAttribute("disabled",!0),document.getElementById("educationendmonth").setAttribute("disabled",!0)):(document.getElementById("educationendyear").removeAttribute("disabled"),document.getElementById("educationendmonth").removeAttribute("disabled"))}function changeUpdatedEducationEndState(){this.checked?(document.getElementById("updateeducationendyear").setAttribute("disabled",!0),document.getElementById("updateeducationendmonth").setAttribute("disabled",!0)):(document.getElementById("updateeducationendyear").removeAttribute("disabled"),document.getElementById("updateeducationendmonth").removeAttribute("disabled"))}function fetchEducation(){document.querySelector("#education tbody").innerHTML="",document.querySelector(".education-card").style.display="none",fetch(localEducationURL,{method:"get"}).then((function(e){return e.json()})).then((function(e){console.log(e),e instanceof Array?(education=_toConsumableArray(e),document.querySelector("#education table").style.display="table",education.forEach((function(e){document.querySelector("#education tbody").innerHTML+='\n                <tr>\n                    <th scope="row">'.concat(e.name,"</th>\n                    <td>").concat(e.school,"</td>\n                    <td>").concat(e.startmonth," ").concat(e.startyear," - ").concat(1==e.ongoing?"pågående":e.endmonth+" "+e.endyear,'</td>\n                    <td>\n                        <button type="button" class="btn btn-info btn-sm" onClick="openEducationUpdateModal(').concat(e.id,')">Uppdatera</button>\n                        <button type="button" class="btn btn-danger btn-sm" onClick="openEducationDeleteModal(').concat(e.id,')">Radera</button>\n                    </td>\n                </tr>\n                ')}))):(document.querySelector("#education table").style.display="none",document.querySelector(".education-card").style.display="block",document.querySelector(".education-card .card-title").textContent=e.message,document.querySelector(".education-card .card-text").textContent="Lägg till ny utbildning.")})).catch((function(e){document.querySelector("#education table").style.display="none",document.querySelector(".education-card").style.display="block",document.querySelector(".education-card .card-title").textContent=e,document.querySelector(".education-card .card-text").textContent="Något gick fel med inladdningen av utbildningar."}))}function addEducation(e){e.preventDefault();var t={},n=document.querySelector("#educationname").value,o=document.querySelector("#educationschool").value,d=document.querySelector("#educationstartyear").value,c=document.querySelector("#educationstartmonth").value,a=document.querySelector("#educationendyear").value,l=document.querySelector("#educationendmonth").value;0!==n.trim().length&&0!==o.trim().length&&0!==d.trim().length&&0!==c.trim().length?(t=document.querySelector("#educationongoing").checked?{name:n,school:o,startyear:d,startmonth:c,ongoing:1,endyear:null,endmonth:null}:{name:n,school:o,startyear:d,startmonth:c,ongoing:0,endyear:a,endmonth:l},fetch(localEducationURL,{method:"post",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){showEducationMessage(e.class,e.message),clearEducationFields(),fetchEducation()})).catch((function(e){showEducationMessage("education-alert-danger",e)}))):showEducationMessage("education-alert-danger","Fyll i samtliga fält.")}function deleteEducation(){fetch(localEducationURL,{method:"delete",body:JSON.stringify({id:deletedEducationId})}).then((function(e){return e.json()})).then((function(e){showEducationMessage(e.class,e.message),clearEducationFields(),$("#delete-education-modal").modal("hide"),fetchEducation()})).catch((function(e){showEducationMessage("education-alert-danger",e)}))}function updateEducation(e){e.preventDefault();var t=document.querySelector("#updateeducationname").value,n=document.querySelector("#updateeducationschool").value,o=document.querySelector("#updateeducationstartyear").value,d=document.querySelector("#updateeducationstartmonth").value,c=document.querySelector("#updateeducationendyear").value,a=document.querySelector("#updateeducationendmonth").value,l=document.querySelector("#updateeducationongoing").checked;if(0!==t.trim().length&&0!==n.trim().length&&0!==o.trim().length&&0!==d.trim().length)if(!l&&0===c.trim().length&&0===a.trim().length||c.trim().length>0&&0===a.trim().length||a.trim().length>0&&0===c.trim().length)showEducationMessage("update-education-alert-danger","Både slutår och månad måste anges om utbildningen inte är pågående.");else{var r={};r=l?{name:t,school:n,startyear:o,startmonth:d,ongoing:1,endyear:null,endmonth:null,id:updatedEducationId}:{name:t,school:n,startyear:o,startmonth:d,ongoing:0,endyear:c,endmonth:a,id:updatedEducationId},fetch(localEducationURL,{method:"put",body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){showEducationMessage(e.class,e.message),clearEducationFields(),$("#update-education-modal").modal("hide"),fetchEducation()})).catch((function(e){showEducationMessage("update-education-alert-danger",e)}))}else showEducationMessage("update-education-alert-danger","Alla fält måste fyllas i.")}function clearEducationFields(){document.querySelector("#educationname").value="",document.querySelector("#educationschool").value="",document.querySelector("#educationstartyear").selectedIndex=0,document.querySelector("#educationstartmonth").selectedIndex=0,document.querySelector("#educationongoing").checked=!1,document.querySelector("#educationendyear").selectedIndex=0,document.querySelector("#educationendmonth").selectedIndex=0}function openEducationUpdateModal(e){$("#update-education-modal").modal({backdrop:!0,keyboard:!0,focus:!0,show:!0}),updatedEducationId=e;var t=education.find((function(t){return t.id==e}));document.querySelector("#updateeducationname").value=t.name,document.querySelector("#updateeducationschool").value=t.school,document.querySelector("#updateeducationstartyear").value=t.startyear,document.querySelector("#updateeducationstartmonth").value=t.startmonth,document.querySelector("#updateeducationendyear").value=t.endyear,document.querySelector("#updateeducationendmonth").value=t.endmonth,document.querySelector("#updateeducationongoing").checked=1==t.ongoing,1==t.ongoing?(document.getElementById("updateeducationendyear").setAttribute("disabled",!0),document.getElementById("updateeducationendmonth").setAttribute("disabled",!0)):(document.getElementById("updateeducationendyear").removeAttribute("disabled"),document.getElementById("updateeducationendmonth").removeAttribute("disabled"))}function openEducationDeleteModal(e){$("#delete-education-modal").modal({backdrop:!0,keyboard:!0,focus:!0,show:!0}),deletedEducationId=e;var t=education.find((function(t){return t.id==e}));document.querySelector("#delete-education-modal .deleted-education-name").innerHTML="<strong>Namn: </strong>".concat(t.name),document.querySelector("#delete-education-modal .deleted-education-school").innerHTML="<strong>Lärosäte: </strong>".concat(t.school),document.querySelector("#delete-education-modal .deleted-education-date").innerHTML="<strong>Tid: </strong>".concat(t.startmonth," ").concat(t.startyear," - ").concat(t.endmonth," ").concat(t.endyear)}function showEducationMessage(e,t){document.querySelector("."+e).style.display="block",document.querySelector("."+e).innerHTML='<button type="button" class="close" data-dismiss="alert">&times;</button>'.concat(t),setTimeout((function(){document.querySelector("."+e).style.display="none"}),4e3)}document.getElementById("educationongoing").addEventListener("change",changeEducationEndState),document.getElementById("updateeducationongoing").addEventListener("change",changeUpdatedEducationEndState),window.addEventListener("load",fetchEducation),document.querySelector(".education-form").addEventListener("submit",addEducation),document.querySelector(".education-delete-btn").addEventListener("click",deleteEducation),document.querySelector(".update-education-form").addEventListener("submit",updateEducation);var localEmploymentURL="http://localhost/resume_site/pub/api/employment",employments=[],deletedEmploymentId=null,updatedEmploymentId=null;function changeEmploymentEndState(){this.checked?(document.getElementById("employmentendyear").setAttribute("disabled",!0),document.getElementById("employmentendmonth").setAttribute("disabled",!0)):(document.getElementById("employmentendyear").removeAttribute("disabled"),document.getElementById("employmentendmonth").removeAttribute("disabled"))}function changeUpdatedEmploymentEndState(){this.checked?(document.getElementById("updateemploymentendyear").setAttribute("disabled",!0),document.getElementById("updateemploymentendmonth").setAttribute("disabled",!0)):(document.getElementById("updateemploymentendyear").removeAttribute("disabled"),document.getElementById("updateemploymentendmonth").removeAttribute("disabled"))}function fetchEmployment(){document.querySelector("#employment tbody").innerHTML="",document.querySelector(".employment-card").style.display="none",fetch(localEmploymentURL,{method:"get"}).then((function(e){return e.json()})).then((function(e){console.log(e),e instanceof Array?(employments=_toConsumableArray(e),document.querySelector("#employment table").style.display="table",employments.forEach((function(e){document.querySelector("#employment tbody").innerHTML+='\n                <tr>\n                    <th scope="row">'.concat(e.title,"</th>\n                    <td>").concat(e.place,"</td>\n                    <td>").concat(e.startmonth," ").concat(e.startyear," - ").concat(1==e.ongoing?"pågående":e.endmonth+" "+e.endyear,'</td>\n                    <td>\n                        <button type="button" class="btn btn-info btn-sm" onClick="openEmploymentUpdateModal(').concat(e.id,')">Uppdatera</button>\n                        <button type="button" class="btn btn-danger btn-sm" onClick="openEmploymentDeleteModal(').concat(e.id,')">Radera</button>\n                    </td>\n                </tr>\n                ')}))):(document.querySelector("#employment table").style.display="none",document.querySelector(".employment-card").style.display="block",document.querySelector(".employment-card .card-title").textContent=e.message,document.querySelector(".employment-card .card-text").textContent="Lägg till ny anställning.")})).catch((function(e){document.querySelector("#employment table").style.display="none",document.querySelector(".employment-card").style.display="block",document.querySelector(".employment-card .card-title").textContent=e,document.querySelector(".employment-card .card-text").textContent="Något gick fel med inladdningen av anställningar."}))}function addEmployment(e){e.preventDefault();var t={},n=document.querySelector("#employmenttitle").value,o=document.querySelector("#employmentplace").value,d=document.querySelector("#employmentstartyear").value,c=document.querySelector("#employmentstartmonth").value,a=document.querySelector("#employmentendyear").value,l=document.querySelector("#employmentendmonth").value;0!==n.trim().length&&0!==o.trim().length&&0!==d.trim().length&&0!==c.trim().length?(t=document.querySelector("#employmentongoing").checked?{title:n,place:o,startyear:d,startmonth:c,ongoing:1,endyear:null,endmonth:null}:{title:n,place:o,startyear:d,startmonth:c,ongoing:0,endyear:a,endmonth:l},fetch(localEmploymentURL,{method:"post",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){showEmploymentMessage(e.class,e.message),clearEmploymentFields(),fetchEmployment()})).catch((function(e){showEmploymentMessage("employment-alert-danger",e)}))):showEmploymentMessage("employment-alert-danger","Fyll i samtliga fält.")}function deleteEmployment(){fetch(localEmploymentURL,{method:"delete",body:JSON.stringify({id:deletedEmploymentId})}).then((function(e){return e.json()})).then((function(e){showEmploymentMessage(e.class,e.message),clearEmploymentFields(),$("#delete-employment-modal").modal("hide"),fetchEmployment()})).catch((function(e){showEmploymentMessage("employment-alert-danger",e)}))}function updateEmployment(e){e.preventDefault();var t=document.querySelector("#updateemploymenttitle").value,n=document.querySelector("#updateemploymentplace").value,o=document.querySelector("#updateemploymentstartyear").value,d=document.querySelector("#updateemploymentstartmonth").value,c=document.querySelector("#updateemploymentendyear").value,a=document.querySelector("#updateemploymentendmonth").value,l=document.querySelector("#updateemploymentongoing").checked;if(0!==t.trim().length&&0!==n.trim().length&&0!==o.trim().length&&0!==d.trim().length)if(!l&&0===c.trim().length&&0===a.trim().length||c.trim().length>0&&0===a.trim().length||a.trim().length>0&&0===c.trim().length)showEmploymentMessage("update-employment-alert-danger","Både slutår och månad måste anges om utbildningen inte är pågående.");else{var r={};r=l?{title:t,place:n,startyear:o,startmonth:d,ongoing:1,endyear:null,endmonth:null,id:updatedEmploymentId}:{title:t,place:n,startyear:o,startmonth:d,ongoing:0,endyear:c,endmonth:a,id:updatedEmploymentId},fetch(localEmploymentURL,{method:"put",body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){showEmploymentMessage(e.class,e.message),clearEmploymentFields(),$("#update-employment-modal").modal("hide"),fetchEmployment()})).catch((function(e){showEmploymentMessage("update-employment-alert-danger",e)}))}else showEmploymentMessage("update-employment-alert-danger","Alla fält måste fyllas i.")}function clearEmploymentFields(){document.querySelector("#employmenttitle").value="",document.querySelector("#employmentplace").value="",document.querySelector("#employmentstartyear").selectedIndex=0,document.querySelector("#employmentstartmonth").selectedIndex=0,document.querySelector("#employmentongoing").checked=!1,document.querySelector("#employmentendyear").selectedIndex=0,document.querySelector("#employmentendmonth").selectedIndex=0}function openEmploymentUpdateModal(e){$("#update-employment-modal").modal({backdrop:!0,keyboard:!0,focus:!0,show:!0}),updatedEmploymentId=e;var t=employments.find((function(t){return t.id==e}));console.log(t),document.querySelector("#updateemploymenttitle").value=t.title,document.querySelector("#updateemploymentplace").value=t.place,document.querySelector("#updateemploymentstartyear").value=t.startyear,document.querySelector("#updateemploymentstartmonth").value=t.startmonth,document.querySelector("#updateemploymentendyear").value=t.endyear,document.querySelector("#updateemploymentendmonth").value=t.endmonth,document.querySelector("#updateemploymentongoing").checked=1==t.ongoing,1==t.ongoing?(document.getElementById("updateemploymentendyear").setAttribute("disabled",!0),document.getElementById("updateemploymentendmonth").setAttribute("disabled",!0)):(document.getElementById("updateemploymentendyear").removeAttribute("disabled"),document.getElementById("updateemploymentendmonth").removeAttribute("disabled"))}function openEmploymentDeleteModal(e){$("#delete-employment-modal").modal({backdrop:!0,keyboard:!0,focus:!0,show:!0}),deletedEmploymentId=e;var t=employments.find((function(t){return t.id==e}));document.querySelector("#delete-employment-modal .deleted-employment-title").innerHTML="<strong>Titel: </strong>".concat(t.title),document.querySelector("#delete-employment-modal .deleted-employment-place").innerHTML="<strong>Arbetsplats: </strong>".concat(t.place),document.querySelector("#delete-employment-modal .deleted-employment-date").innerHTML="<strong>Tid: </strong>".concat(t.startmonth," ").concat(t.startyear," - ").concat(1==t.ongoing?"pågående":t.endmonth+" "+t.endyear)}function showEmploymentMessage(e,t){document.querySelector("."+e).style.display="block",document.querySelector("."+e).innerHTML='<button type="button" class="close" data-dismiss="alert">&times;</button>'.concat(t),setTimeout((function(){document.querySelector("."+e).style.display="none"}),4e3)}document.getElementById("employmentongoing").addEventListener("change",changeEmploymentEndState),document.getElementById("updateemploymentongoing").addEventListener("change",changeUpdatedEmploymentEndState),window.addEventListener("load",fetchEmployment),document.querySelector(".employment-form").addEventListener("submit",addEmployment),document.querySelector(".employment-delete-btn").addEventListener("click",deleteEmployment),document.querySelector(".update-employment-form").addEventListener("submit",updateEmployment);var localProjectURL="http://localhost/resume_site/pub/api/project",projects=[],deletedProjectId=null,updatedProjectId=null;function fetchProjects(){document.querySelector("#projects tbody").innerHTML="",document.querySelector(".project-card").style.display="none",fetch(localProjectURL,{method:"get"}).then((function(e){return e.json()})).then((function(e){console.log(e),e instanceof Array?(projects=_toConsumableArray(e),document.querySelector("#projects table").style.display="table",projects.forEach((function(e){document.querySelector("#projects tbody").innerHTML+='\n                <tr>\n                <th scope="row">'.concat(e.title,'</th>\n                <td><a href="').concat(e.link,'" target="_blank">').concat(e.link,"</a></td>\n                <td>").concat(e.description,'</td>\n                <td>\n                    <button type="button" class="btn btn-info btn-sm" onClick="openProjectUpdateModal(').concat(e.id,')">Uppdatera</button>\n                    <button type="button" class="btn btn-danger btn-sm" onClick="openProjectDeleteModal(').concat(e.id,')">Radera</button>\n                </td>\n            </tr>')}))):(document.querySelector("#projects table").style.display="none",document.querySelector(".project-card").style.display="block",document.querySelector(".project-card .card-title").textContent=e.message,document.querySelector(".project-card .card-text").textContent="Lägg till nytt projekt.")})).catch((function(e){document.querySelector("#projects table").style.display="none",document.querySelector(".project-card").style.display="block",document.querySelector(".project-card .card-title").textContent=e,document.querySelector(".project-card .card-text").textContent="Något gick fel med inladdningen av projekt."}))}function addProject(e){e.preventDefault(),console.log("Adding project...");var t=document.querySelector("#projecttitle").value,n=document.querySelector("#projectlink").value,o=document.querySelector("#projectdescription").value;if(0!==t.trim().length&&0!==n.trim().length&&0!==o.trim().length){var d={title:t,link:n,description:o};fetch(localProjectURL,{method:"post",body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){showProjectMessage(e.class,e.message),clearProjectFields(),fetchProjects()})).catch((function(e){showProjectMessage("project-alert-danger",e)}))}else showProjectMessage("project-alert-danger","Fyll i samtliga fält.")}function deleteProject(){fetch(localProjectURL,{method:"delete",body:JSON.stringify({id:deletedProjectId})}).then((function(e){return e.json()})).then((function(e){showProjectMessage(e.class,e.message),clearProjectFields(),$("#delete-project-modal").modal("hide"),fetchProjects()})).catch((function(e){showProjectMessage("project-alert-danger",e)}))}function updateProject(e){e.preventDefault();var t=document.querySelector("#updateprojecttitle").value,n=document.querySelector("#updateprojectlink").value,o=document.querySelector("#updateprojectdescription").value;if(0!==t.trim().length&&0!==n.trim().length&&0!==o.trim().length){var d={title:t,link:n,description:o,id:updatedProjectId};fetch(localProjectURL,{method:"put",body:JSON.stringify(d)}).then((function(e){return e.json()})).then((function(e){showProjectMessage(e.class,e.message),clearProjectFields(),$("#update-project-modal").modal("hide"),fetchProjects()})).catch((function(e){showProjectMessage("update-project-alert-danger",e)}))}else showProjectMessage("update-project-alert-danger","Alla fält måste fyllas i.")}function clearProjectFields(){document.querySelector("#projecttitle").value="",document.querySelector("#projectlink").value="",document.querySelector("#projectdescription").selectedIndex=0}function openProjectUpdateModal(e){$("#update-project-modal").modal({backdrop:!0,keyboard:!0,focus:!0,show:!0}),updatedProjectId=e;var t=projects.find((function(t){return t.id==e}));document.querySelector("#updateprojecttitle").value=t.title,document.querySelector("#updateprojectlink").value=t.link,document.querySelector("#updateprojectdescription").value=t.description}function openProjectDeleteModal(e){$("#delete-project-modal").modal({backdrop:!0,keyboard:!0,focus:!0,show:!0}),deletedProjectId=e;var t=projects.find((function(t){return t.id==e}));document.querySelector("#delete-project-modal .deleted-project-title").innerHTML="<strong>Titel: </strong>".concat(t.title),document.querySelector("#delete-project-modal .deleted-project-link").innerHTML='<strong>Länk: </strong><a href="'.concat(t.link,'" target="_blank">').concat(t.link,"</a>"),document.querySelector("#delete-project-modal .deleted-project-description").innerHTML="<strong>Beskrivning: </strong>".concat(t.description)}function showProjectMessage(e,t){document.querySelector("."+e).style.display="block",document.querySelector("."+e).innerHTML='<button type="button" class="close" data-dismiss="alert">&times;</button>'.concat(t),setTimeout((function(){document.querySelector("."+e).style.display="none"}),4e3)}window.addEventListener("load",fetchProjects),document.querySelector(".project-form").addEventListener("submit",addProject),document.querySelector(".project-delete-btn").addEventListener("click",deleteProject),document.querySelector(".update-project-form").addEventListener("submit",updateProject);